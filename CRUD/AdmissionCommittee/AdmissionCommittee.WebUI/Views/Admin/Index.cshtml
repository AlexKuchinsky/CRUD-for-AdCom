@using AdmissionCommittee.Domain.Entities;
@using AdmissionCommittee.WebUI.HtmlHelpers
@model AdmissionCommittee.WebUI.Models.EnrolleesListViewModel

@{
    ViewBag.Title = "All enrollees";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="en-card mdl-shadow--2dp en-overflow">
    <div class="en-block_header">
        <div class="en-header_big">All enrollees</div>
        <div class="en-padding_dropdown">
            @Html.EnumDropDownListFor(Model => Model.CurrentCategoryOfEducation, "Any level", new { @onchange = "CallChangeFunc(this.options[this.selectedIndex].text)" })
        </div>
        <script>
        function CallChangeFunc(val) {
            window.location.href = "@Url.RouteUrl(new { controller = "Admin", action = "Index"})/" + val + "/1";
        }
        </script>
        <ul class="ul-treefree ul-dropfree">
            <li>
                Древовидный список;
                <ul>
                    <li>У каждого элемента списка есть родитель, кроме элементов первого уровня;</li>
                    <li>Каждый следующий уровень вложенности смещается внутрь на фиксированное расстояние; </li>
                    <li>
                        Наличие соединяющих линий;
                        <ul>
                            <li>Все элементы "братья" должны соединяться линией;</li>
                            <li>Все элементы "дети" должны соединяться линией с родителем;</li>
                        </ul>
                    </li>
                    <li>Элементы древовидного списка не должны иметь фоновую заливку для возможности отображения списка над любым градиентным фоном;</li>
                </ul>
            </li>
            <li>
                Раскрывающийся древовидный список;
                <ul>
                    <li>Все то же что и у простого древовидного списка;</li>
                    <li>
                        Наличие управляющих кнопок плюсиков;
                        <ul>
                            <li>Каждый элемент являющийся родителем слева от себя должен иметь управляющую кнопку плюсик;</li>
                            <li>При нажатии на эту кнопку дочерние элементы показываются, а кнопка приобретает вид минуса, при повторном нажатии дочернии элементы скрываются, кнопка приобретает свой первоначальный вид.</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <script>
            
        </script>
    </div>
    <div class="en-block_add">
        @Html.ActionLink("+", "Create", null, new { @class = "mdl-button mdl-js-button mdl-button--fab mdl-button--accent" })
    </div>
</div>

<div class="mdl-shadow--2dp en-card">
    <table class="mdl-data-table en-full_width">
        <tr>
            <th class="mdl-data-table__cell--non-numeric">Full Name</th>
            <th>Date of birth</th>
            <th>Sum CT</th>
            <th class="mdl-data-table__cell--non-numeric">Education level</th>
            <th class="en-button_conteiner_240"></th>
        </tr>
        @foreach (var item in Model.Enrollees)
        {
            <tr>
                <td class="mdl-data-table__cell--non-numeric">@Html.ActionLink((item.LastName + " " + item.FirstName + " " + item.Patronymic),
                                        "Show", new { item.EnrolleeID })</td>
                <td>@item.DateOfBirth.ToString("d")</td>
                <td>@item.GetCTSum()</td>
                <td class="mdl-data-table__cell--non-numeric">@item.EducationLevel.Description()</td>
                <td class="mdl-data-table__cell--non-numeric en-button_conteiner_240">
                    <div class="en-float_left">
                        @Html.ActionLink("Edit", "Edit", new { item.EnrolleeID }, new { @class = "mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored" })
                    </div>
                    <div class="en-float_right">
                        @using (Html.BeginForm("Delete", "Admin", new { item.EnrolleeID }))
                        {
                            @Html.Hidden("ProductID", item.EnrolleeID)
                            <input type="submit"
                                    class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"
                                    value="Delete" 
                                    onclick="return ConfirmDeleteEnrollee()"/>
                            <script language="javascript" type="text/javascript">
                                function ConfirmDeleteEnrollee()
                                {
                                    var x = confirm("Are you sure you want to delete this enrollee?");
                                    if (x)
                                        return true;
                                    else
                                        return false;
                                }
                            </script>
                        }
                    </div>
                </td>
            </tr>
        }
    </table>
</div>

@*<div class="en-card mdl-shadow--2dp en-card_content">
    <div style="float:left">
        @Html.ActionLink("Add", "Create", null, new { @class = "mdl-button mdl-js-button mdl-button--fab" })
    </div>
    <div style="float:right">
        @Html.PageLinks(Model.PagingInfo, x => Url.Action("Index", "Admin", new { edLevel = Model.CurrentCategoryOfEducation, page = x }), "mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab")
    </div>
</div>*@


